<div class="max-w-6xl mx-auto">
  <div class="mb-8">
    <h1 class="text-3xl font-bold mb-2">Utforsk quizzer</h1>
    <p class="text-gray-600">Finn og ta quizzer om ulike IT-temaer.</p>
  </div>
  
  <!-- Filters -->
  <div class="bg-white p-6 rounded-lg shadow-md mb-8">
    <form action="/quiz" method="GET" class="space-y-4 md:space-y-0 md:flex md:items-end md:gap-4">
      <div class="flex-1">
        <label for="search" class="block font-medium text-gray-700 mb-1">Søk</label>
        <input 
          type="text" 
          id="search" 
          name="search" 
          value="<%= filter && filter.search ? filter.search : '' %>" 
          placeholder="Søk etter quizztittel, beskrivelse eller tags" 
          class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
        >
      </div>
      
      <div class="md:w-1/5">
        <label for="category" class="block font-medium text-gray-700 mb-1">Kategori</label>
        <select 
          id="category" 
          name="category" 
          class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
        >
          <option value="alle" <%= !filter || !filter.category || filter.category === 'alle' ? 'selected' : '' %>>Alle kategorier</option>
          <option value="programutvikling" <%= filter && filter.category === 'programutvikling' ? 'selected' : '' %>>Programutvikling</option>
          <option value="drift" <%= filter && filter.category === 'drift' ? 'selected' : '' %>>Drift og infrastruktur</option>
          <option value="nettverk" <%= filter && filter.category === 'nettverk' ? 'selected' : '' %>>Nettverk og sikkerhet</option>
          <option value="database" <%= filter && filter.category === 'database' ? 'selected' : '' %>>Database</option>
          <option value="annet" <%= filter && filter.category === 'annet' ? 'selected' : '' %>>Annet</option>
        </select>
      </div>
      
      <div class="md:w-1/5">
        <label for="difficulty" class="block font-medium text-gray-700 mb-1">Vanskelighetsgrad</label>
        <select 
          id="difficulty" 
          name="difficulty" 
          class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
        >
          <option value="alle" <%= !filter || !filter.difficulty || filter.difficulty === 'alle' ? 'selected' : '' %>>Alle nivåer</option>
          <option value="enkel" <%= filter && filter.difficulty === 'enkel' ? 'selected' : '' %>>Enkel</option>
          <option value="middels" <%= filter && filter.difficulty === 'middels' ? 'selected' : '' %>>Middels</option>
          <option value="vanskelig" <%= filter && filter.difficulty === 'vanskelig' ? 'selected' : '' %>>Vanskelig</option>
        </select>
      </div>
      
      <div class="md:flex-shrink-0">
        <button type="submit" class="w-full md:w-auto bg-primary-600 text-white px-6 py-2 rounded-md hover:bg-primary-700 transition">
          Filtrer
        </button>
        
        <% if (filter && (filter.search || (filter.category && filter.category !== 'alle') || (filter.difficulty && filter.difficulty !== 'alle'))) { %>
          <a href="/quiz" class="inline-block mt-2 md:mt-0 md:ml-2 text-primary-600 hover:text-primary-800">
            Nullstill
          </a>
        <% } %>
      </div>
    </form>
  </div>
  
  <!-- Quiz list -->
  <div class="space-y-6">
    <% if (quizzes && quizzes.length > 0) { %>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <% quizzes.forEach(quiz => { %>
          <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">
            <div class="p-6">
              <div class="flex items-start justify-between">
                <h2 class="text-xl font-semibold mb-2 flex-grow"><%= quiz.title %></h2>
                <span class="inline-block px-3 py-1 rounded-full text-xs font-medium <%= {
                  'programutvikling': 'bg-blue-100 text-blue-800',
                  'drift': 'bg-green-100 text-green-800',
                  'nettverk': 'bg-purple-100 text-purple-800',
                  'database': 'bg-yellow-100 text-yellow-800',
                  'annet': 'bg-gray-100 text-gray-800'
                }[quiz.category] || 'bg-gray-100 text-gray-800' %>">
                  <%= {
                    'programutvikling': 'Programutvikling',
                    'drift': 'Drift',
                    'nettverk': 'Nettverk',
                    'database': 'Database',
                    'annet': 'Annet'
                  }[quiz.category] || 'Ukjent' %>
                </span>
              </div>
              
              <p class="text-gray-600 mb-4 line-clamp-2"><%= quiz.description %></p>
              
              <div class="flex flex-wrap gap-2 mb-4">
                <span class="px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs">
                  <%= {
                    'enkel': 'Enkel',
                    'middels': 'Middels',
                    'vanskelig': 'Vanskelig'
                  }[quiz.difficulty] || 'Ukjent' %>
                </span>
                
                <span class="px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                  <%= quiz.timeLimit %> min
                </span>
                
                <span class="px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                  <%= quiz.questions.length %> spørsmål
                </span>
              </div>
              
              <div class="flex items-center text-sm text-gray-500 mb-4">
                <span>Av <%= quiz.author.username %></span>
                <span class="mx-2">•</span>
                <span><%= quiz.plays %> gjennomføringer</span>
              </div>
              
              <a 
                href="/quiz/play/<%= quiz._id %>" 
                class="block w-full bg-primary-600 text-white text-center py-2 rounded-md hover:bg-primary-700 transition"
              >
                Ta quizen
              </a>
            </div>
          </div>
        <% }); %>
      </div>
    <% } else { %>
      <div class="bg-white p-8 rounded-lg shadow-md text-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <h2 class="text-xl font-semibold mb-2">Ingen quizzer funnet</h2>
        <p class="text-gray-600 mb-4">Vi fant ingen quizzer som matchet dine søkekriterier.</p>
        <a href="/quiz" class="text-primary-600 hover:text-primary-800">Vis alle quizzer</a>
        
        <% if (user) { %>
          <div class="mt-6 pt-6 border-t">
            <p class="text-gray-600 mb-4">Eller lag din egen quiz!</p>
            <a href="/quiz/create" class="inline-block bg-primary-600 text-white px-6 py-2 rounded-md hover:bg-primary-700 transition">
              Lag en quiz
            </a>
          </div>
        <% } %>
      </div>
    <% } %>
  </div>
  
  <% if (user) { %>
    <div class="mt-8 text-center">
      <a href="/quiz/create" class="inline-block bg-primary-600 text-white px-6 py-3 rounded-md hover:bg-primary-700 transition font-medium">
        Lag din egen quiz
      </a>
    </div>
  <% } else { %>
    <div class="mt-8 text-center">
      <p class="text-gray-600 mb-2">Vil du lage din egen quiz?</p>
      <a href="/auth/login" class="text-primary-600 hover:text-primary-800 font-medium">Logg inn</a>
      <span class="text-gray-500 mx-2">eller</span>
      <a href="/auth/register" class="text-primary-600 hover:text-primary-800 font-medium">Registrer deg</a>
    </div>
  <% } %>
</div> 